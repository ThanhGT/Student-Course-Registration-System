import{top,left,right,bottom}from"../enums.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getWindow from"../dom-utils/getWindow.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import getComputedStyle from"../dom-utils/getComputedStyle.js";import getBasePlacement from"../utils/getBasePlacement.js";var round=Math.round,unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t){var e=t.x,o=t.y,s=window.devicePixelRatio||1;return{x:round(round(e*s)/s)||0,y:round(round(o*s)/s)||0}}export function mapToStyles(t){var e,o=t.popper,s=t.popperRect,a=t.placement,p=t.offsets,i=t.position,r=t.gpuAcceleration,n=t.adaptive,f=t.roundOffsets,m=!0===f?roundOffsetsByDPR(p):"function"==typeof f?f(p):p,l=m.x,d=void 0===l?0:l,u=m.y,c=void 0===u?0:u,g=p.hasOwnProperty("x"),O=p.hasOwnProperty("y"),b=left,y=top,j=window;if(n){var v=getOffsetParent(o);v===getWindow(o)&&(v=getDocumentElement(o)),a===top&&(y=bottom,c-=v.clientHeight-s.height,c*=r?1:-1),a===left&&(b=right,d-=v.clientWidth-s.width,d*=r?1:-1)}var w,x=Object.assign({position:i},n&&unsetSides);return r?Object.assign(Object.assign({},x),{},((w={})[y]=O?"0":"",w[b]=g?"0":"",w.transform=(j.devicePixelRatio||1)<2?"translate("+d+"px, "+c+"px)":"translate3d("+d+"px, "+c+"px, 0)",w)):Object.assign(Object.assign({},x),{},((e={})[y]=O?c+"px":"",e[b]=g?d+"px":"",e.transform="",e))};function computeStyles(t){var e=t.state,o=t.options,s=o.gpuAcceleration,a=void 0===s||s,p=o.adaptive,i=void 0===p||p,r=o.roundOffsets,n=void 0===r||r,f={placement:getBasePlacement(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign(Object.assign({},e.styles.popper),mapToStyles(Object.assign(Object.assign({},f),{},{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:n})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign(Object.assign({},e.styles.arrow),mapToStyles(Object.assign(Object.assign({},f),{},{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-placement":e.placement})}export default{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};